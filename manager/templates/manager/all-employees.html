{% extends 'blank-main.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="section">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="section-title">
          <h3 class="title">All Employees</h3>
        </div>
        <div class="departments">
          
          {% for department_name, department_full_name in departments %}
          <div class="department">
            <h3 class="dep-name">{{ department_full_name }}</h3>
            <div class="row">
                {% for employee in employees %} 
                {% if employee.employeeprofile.department == department_name %}       
                <div class="employee profile-container" >
                  <div class="profile-header">
                    <img src="{{ employee.photo.url }}" alt="Employee Photo" />
                    <h2>{{ employee.first_name }} {{ employee.last_name }}</h2>
                    <p>{{ employee.employeeprofile.get_position_display }}</p>
                  </div>
                  <div class="employee-actions" aria-label="Employee Options">
                    <a href="{% url 'manager:edit-employee' employee.id %}" title="Edit Employee">
                      <button class="action-btn edit">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                      </button>
                    </a>

                    <a href="{% url 'manager:view-employee' employee.id %}" title="View Details">
                      <button class="action-btn view">
                        <i class="fa fa-eye" aria-hidden="true"></i>
                      </button>
                    </a>

                    <a href="{% url 'manager:delete-employee' employee.id %}" title="Remove Employee">
                      <button class="action-btn remove">
                        <i class="fa fa-trash" aria-hidden="true"></i>
                      </button>
                    </a>
                  </div>
                </div>
                {% endif %}
                {% endfor %}
              </div>
          </div>
          {% endfor %}
          
        </div>
        </div>
    </div>
    </div>
  </div>
<style>
  /* Base Project Theme Color: #D10024 (Red) */

  /* --- Section Title Enhancement (Kept Clean) --- */
  .section-title {
    font-family: 'Montserrat', sans-serif; /* Assuming this is your project font */
    color: #333;
    font-weight: 700; /* Bolder weight */
    text-transform: uppercase;
    letter-spacing: 1.5px; /* Slightly wider spacing */
    padding-bottom: 8px; /* More space below the title */
    position: relative;
    margin-bottom: 2.5rem; /* Increased margin */
    font-size: 24px; /* Slightly larger base font */
  }

  /* Underline effect */
  .section-title::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 70px; /* Longer line */
    height: 4px; /* Thicker line */
    background-color: #d10024;
    border-radius: 5px;
  }

  /* --- Department Structure --- */
  .departments {
    display: flex;
    flex-direction: column;
    gap: 3rem; /* More space between departments */
  }

  .department {
    border-radius: 8px; /* Slightly more rounded */
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); /* Soft shadow for the entire block */
  }

  /* Department Header (Strong Theme Integration) */
  .department .dep-name {
    margin: 0;
    padding: 18px 20px;
    background-color: #333; /* Use a strong dark color for contrast */
    color: #fff;
    font-weight: 700;
    text-align: left; /* Aligned left for a professional feel */
    font-size: 1.6rem;
    text-transform: uppercase;
    border-left: 5px solid #d10024; /* Theme accent line */
  }

  .department .row {
    background-color: #fcfcfc; /* Very light background for contrast */
    padding: 20px; /* More inner padding */
    border: 1px solid #eee; /* Light border */
    border-top: none;
    max-width: 100%;
    margin: 0;
    display: flex;
    align-items: stretch; /* Employees cards should stretch to the same height */
    justify-content: flex-start;
    gap: 20px; /* Consistent gap */
    flex-wrap: wrap;
  }

  /* --- Employee Profile Card (Modern, Clean Look) --- */
  .profile-container {
    /* Use Bootstrap columns logic for sizing inside flex container */
    flex: 0 0 calc(25% - 15px); /* Allows 4 items per row easily (adjust gap accordingly) */
    min-width: 250px;
    background: #ffffff;
    border-radius: 8px;
    border: 1px solid #e0e0e0; /* Subtle light border */
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); /* Clean lift-up shadow */
    padding: 20px;
    margin: 0; /* No margin inside the row gap */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex; /* Makes the card itself a flex container */
    flex-direction: column;
    justify-content: space-between; /* Pushes footer/actions to the bottom */
  }
  
  /* Responsive Adjustments for Cards */
  @media (max-width: 1200px) {
    .profile-container { flex: 0 0 calc(33.33% - 14px); } /* 3 per row */
  }
  @media (max-width: 768px) {
    .profile-container { flex: 0 0 calc(50% - 10px); } /* 2 per row */
  }
  @media (max-width: 576px) {
    .profile-container { flex: 0 0 100%; } /* 1 per row on mobile */
  }

  .profile-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); /* Stronger lift-up effect */
  }

  .profile-header {
    text-align: center;
  }

  /* Image styling with themed border */
  .profile-header img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto;
    border: 4px solid #d10024; /* Theme color border */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .profile-header h2 {
    font-size: 1.8rem;
    margin: 10px 0 0;
    font-weight: 700;
    color: #333;
    line-height: 1.2;
  }

  .profile-header p {
    font-size: 1.3rem;
    color: #777;
    margin-top: 5px;
    text-align: center;
    text-transform: capitalize; /* Ensure position text looks clean */
  }

  /* --- Action Buttons (Refined) --- */
  .employee-actions {
    display: flex;
    justify-content: center;
    gap: 12px; /* Slightly wider gap */
    margin-top: 10px;
    padding-top: 15px;
    border-top: 2px dashed #eee; /* Separator line */
  }

  .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 45px; /* Larger target size */
    height: 45px;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px; /* Larger icon */
    color: #6c757d;
    transition: all 0.3s ease-in-out;
    outline: none;
  }

  .action-btn:hover {
    transform: translateY(-2px); /* Slight vertical hover effect */
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
  }

  /* Specific Action Colors (Using strong background colors for clarity) */
  .action-btn.edit { background-color: #ffc107; border-color: #ffc107; color: #fff; }
  .action-btn.edit:hover { background-color: #e0a800; }

  .action-btn.view { background-color: #007bff; border-color: #007bff; color: #fff; }
  .action-btn.view:hover { background-color: #0056b3; }

  /* Theme-specific delete button */
  .action-btn.remove { background-color: #d10024; border-color: #d10024; color: #fff; }
  .action-btn.remove:hover { background-color: #a1001c; }
</style>
  {% endblock content %}